/**
  Count.c  Written by Chris Stephens (c) 1995

  This Script is Shareware.  See the Readme with this Tar for
  information.
  ...
**/

#include <stdio.h>
#include <stdlib.h>
char *digits[] =
      {"0xff","0xff","0xff","0xc3","0x99","0x99","0x99","0x99",
         "0x99","0x99","0x99","0x99","0xc3","0xff","0xff","0xff",
         "0xff","0xff","0xff","0xcf","0xc7","0xcf","0xcf","0xcf",
         "0xcf","0xcf","0xcf","0xcf","0xcf","0xff","0xff","0xff",
         "0xff","0xff","0xff","0xc3","0x99","0x9f","0x9f","0xcf",
         "0xe7","0xf3","0xf9","0xf9","0x81","0xff","0xff","0xff",
         "0xff","0xff","0xff","0xc3","0x99","0x9f","0x9f","0xc7",
         "0x9f","0x9f","0x9f","0x99","0xc3","0xff","0xff","0xff",
         "0xff","0xff","0xff","0xcf","0xcf","0xc7","0xc7","0xcb",
         "0xcb","0xcd","0x81","0xcf","0x87","0xff","0xff","0xff",
         "0xff","0xff","0xff","0x81","0xf9","0xf9","0xf9","0xc1",
         "0x9f","0x9f","0x9f","0x99","0xc3","0xff","0xff","0xff",
         "0xff","0xff","0xff","0xc7","0xf3","0xf9","0xf9","0xc1",
         "0x99","0x99","0x99","0x99","0xc3","0xff","0xff","0xff",
         "0xff","0xff","0xff","0x81","0x99","0x9f","0x9f","0xcf",
         "0xcf","0xe7","0xe7","0xf3","0xf3","0xff","0xff","0xff",
         "0xff","0xff","0xff","0xc3","0x99","0x99","0x99","0xc3",
         "0x99","0x99","0x99","0x99","0xc3","0xff","0xff","0xff",
         "0xff","0xff","0xff","0xc3","0x99","0x99","0x99","0x99",
         "0x83","0x9f","0x9f","0xcf","0xe3","0xff","0xff","0xff"
         };

main () {
int num;
FILE *fp = NULL;
FILE *out = NULL;
char numb[7];
char hold[8]= "00000000";
char cc[]= "0";
int len;
int holdlen;
int x;
int y;
int c;
int i;

/**  change to the file that holds your numeric counter value  **/

fp = fopen("/usr/var/www/docs/count.txt","r");

   fgets(numb, 8, fp);

fclose(fp);
sscanf(numb,"%d",&num);
num++;

/**  change to the file that holds your numeric counter value  **/

out = fopen("/usr/var/www/docs/count.txt","w");

fprintf(out,"%d",num);
fclose(out);

len = strlen(numb);

for (i=0; i<len; i++)
  {
    hold[8-len+i] = numb[i];
  }
printf ("Content-type: image/x-xbitmap%c%c",10,10);

printf ("#define count_width 56\n");
printf ("#define count_height 16\n");
printf ("static char count_bits[] = {\n");

for (x=0; x<16; x++)
{
  for (y=1; y<8; y++)
  {
   cc[0]=hold[y];
   sscanf(cc,"%d",&c);
   printf(digits[((c*16)+x)]);
   if (y<7) { printf(", "); }
}
if (x==15) { printf("};");}{printf(",\n");}
}
printf("\n");

}
